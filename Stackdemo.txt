import java.util.*;

// Stack ADT interface
interface StackADT<T> {
    void push(T item) throws Exception;
    T pop() throws Exception;
    T peek() throws Exception;
    boolean isEmpty();
}

// Implementation using Array
class ArrayStack<T> implements StackADT<T> {
    private Object[] stack;
    private int top;
    private int size;

    public ArrayStack(int size) {
        this.size = size;
        stack = new Object[size];
        top = -1;
    }

    public void push(T item) throws Exception {
        if (top == size - 1)
            throw new Exception("Stack Overflow");
        stack[++top] = item;
    }

    public T pop() throws Exception {
        if (isEmpty())
            throw new Exception("Stack Underflow");
        return (T) stack[top--];
    }

    public T peek() throws Exception {
        if (isEmpty())
            throw new Exception("Stack is empty");
        return (T) stack[top];
    }

    public boolean isEmpty() {
        return top == -1;
    }
}

// Implementation using Linked List
class LinkedListStack<T> implements StackADT<T> {
    private class Node {
        T data;
        Node next;
        Node(T data) { this.data = data; }
    }

    private Node top;

    public void push(T item) {
        Node newNode = new Node(item);
        newNode.next = top;
        top = newNode;
    }

    public T pop() throws Exception {
        if (isEmpty())
            throw new Exception("Stack Underflow");
        T value = top.data;
        top = top.next;
        return value;
    }

    public T peek() throws Exception {
        if (isEmpty())
            throw new Exception("Stack is empty");
        return top.data;
    }

    public boolean isEmpty() {
        return top == null;
    }
}

// Test class
public class StackInterfaceDemo {
    public static void main(String[] args) {
        try {
            // Test Array-based stack
            StackADT<Integer> arrayStack = new ArrayStack<>(3);
            arrayStack.push(10);
            arrayStack.push(20);
            arrayStack.push(30);
            System.out.println("ArrayStack Pop: " + arrayStack.pop());

            // Test Linked-list-based stack
            StackADT<String> linkedStack = new LinkedListStack<>();
            linkedStack.push("A");
            linkedStack.push("B");
            linkedStack.push("C");
            System.out.println("LinkedListStack Pop: " + linkedStack.pop());
        } catch (Exception e) {
            System.out.println("Error: " + e.getMessage());
        }
    }
}
